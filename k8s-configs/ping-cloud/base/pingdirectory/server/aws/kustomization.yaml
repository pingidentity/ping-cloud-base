kind: Kustomization
apiVersion: kustomize.config.k8s.io/v1beta1

namespace: ping-cloud

commonLabels:
  app: ping-cloud
  role: pingdirectory

resources:
- ../cloud-generic
- periodic-backup.yaml

generatorOptions:
  disableNameSuffixHash: true

configMapGenerator:
- name: pingdirectory-backup-ops-template-files
  files:
  - backup-ops-template/backup-ops.sh
  - backup-ops-template/backup-cm.yaml
  - backup-ops-template/backup-job.yaml
  - backup-ops-template/backup-pvc.yaml

- name: pingdirectory-restore-ops-template-files
  files:
  - restore-ops-template/restore-ops.sh
  - restore-ops-template/restore-cm.yaml
  - restore-ops-template/restore-job.yaml
  - restore-ops-template/restore-pvc.yaml

patchesStrategicMerge:
- discovery-service.yaml