global:
  scrape_interval: 60s
  scrape_timeout: 5s
scrape_configs:
- job_name: 'cw-scrape'
  static_configs:
    - targets:
      - "kube-state-metrics.kube-system.svc.cluster.local:8080"
  metric_relabel_configs:
    - source_labels: [ __name__ ]
      regex: "kube_node_status_condition|kube_endpoint_address_available"
      action: keep
    - regex: "instance|job"
      action: labeldrop
    - source_labels: [__name__,condition,status]
      regex: kube_node_status_condition;Ready;true
      action: drop
    - source_labels: [__name__,condition,status]
      regex: kube_node_status_condition;PIDPressure;(false|unknown)
      action: drop
    - source_labels: [__name__,condition,status]
      regex: kube_node_status_condition;MemoryPressure;(false|unknown)
      action: drop
    - source_labels: [__name__,condition,status]
      regex: kube_node_status_condition;DiskPressure;(false|unknown)
      action: drop